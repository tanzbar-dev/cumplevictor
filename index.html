<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aventura de Cumpleaños de Víctor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Estilos personalizados para un look más "de explorador" */
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #261e1b; /* Marrón oscuro, como la tierra */
            color: #f0f0c0; /* Texto en color crema para simular un pergamino */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }
        .container-card {
            background: linear-gradient(145deg, #3c302a, #261e1b); /* Degradado en tonos tierra */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4), 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: fadeIn 1.2s ease-in-out;
            border: 2px solid #6a4f41; /* Borde de color marrón claro */
            width: 100%;
            max-width: 1200px; /* Añadimos un ancho máximo para pantallas muy grandes */
        }
        .page-content {
            display: none; /* Oculta todas las páginas por defecto */
            transition: opacity 0.5s ease-in-out;
            /* FIX: Eliminamos el padding horizontal para que el video ocupe más espacio */
            padding: 2.5rem 0;
            position: relative;
            text-align: center; /* Centramos el contenido por defecto */
        }
        .page-content.active {
            display: block; /* Muestra solo la página activa */
            animation: slideIn 0.8s forwards;
        }
        /* Contenedor interno para el texto y otros elementos, con ancho limitado */
        .content-wrapper {
            max-width: 60rem; /* max-w-4xl en Tailwind */
            margin-left: auto;
            margin-right: auto;
            text-align: center;
            padding: 0 2.5rem; /* Añadimos padding aquí para compensar el que quitamos de .page-content */
        }
        h1, h2 {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            color: #d4b882; /* Tono dorado/bronce para títulos */
        }
        .video-responsive {
            position: relative;
            padding-bottom: 56.25%; /* Mantiene una relación de aspecto de 16:9 */
            height: 0;
            overflow: hidden;
            border-radius: 16px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            width: 100%; /* El video ocupará el 100% del contenedor .page-content */
            margin: 0 auto 2rem auto; /* Margen inferior añadido */
        }
        .video-responsive iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .adventure-button {
            background: linear-gradient(90deg, #4a7c59, #6a4f41); /* Degradado de verde a marrón */
            border-radius: 9999px;
            padding: 1rem 2rem;
            font-weight: 700;
            color: white;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 10px rgba(74, 124, 89, 0.3);
            transform: scale(1);
        }
        .adventure-button:hover {
            background: linear-gradient(90deg, #3b6b4e, #5a4136);
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 20px rgba(74, 124, 89, 0.4);
        }
        input[type="text"], input[type="number"] {
            background-color: #3c302a; /* Fondo más oscuro para el input */
            color: #f0f0c0;
            border: 1px solid #6a4f41;
            transition: all 0.3s ease;
        }
        input[type="text"]:focus, input[type="number"]:focus {
            border-color: #4a7c59;
            box-shadow: 0 0 0 3px rgba(74, 124, 89, 0.5);
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #3c302a;
            border: 2px solid #d4b882;
            padding: 2rem;
            border-radius: 10px;
            z-index: 1000;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            animation: zoomIn 0.3s forwards;
            display: none; /* Hidden by default */
        }
        @keyframes zoomIn {
            from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 999;
            display: none;
        }
    </style>
</head>
<body>

<div class="overlay" id="overlay"></div>
<div class="message-box text-center" id="message-box">
    <p id="message-text" class="text-xl mb-6"></p>
    <button onclick="closeMessageBox()" class="adventure-button">Cerrar</button>
</div>

<div class="container-card mx-auto p-6 md:p-12 rounded-2xl flex flex-col items-center">

    <div id="stage-0" class="page-content active">
        <div class="content-wrapper">
            <h1 class="text-3xl md:text-5xl font-bold mb-4">¡¡¡¡Feliz cumpleaños pequeño buscador de tesoros!!!!</h1>
            <p class="text-lg md:text-xl mb-8">
                El día de hoy tienes una misión llena de retos, peligros y recompensas que solo puedes aceptar si es tu cumpleaños! estas listo para aceptarla?!? piensalo bien y da click en comenzar... solo recuerda que si aceptas no hay vuelta atras!
            </p>
            <div class="w-full h-auto max-w-sm mx-auto mb-8 rounded-lg overflow-hidden">
                <img src="https://raw.githubusercontent.com/tanzbar-dev/cumplevictor/main/cumplehuguito.jpeg"
                     alt="Imagen de feliz cumpleaños, con temática de búsqueda del tesoro"
                     class="w-full h-auto object-cover">
            </div>
            <button id="start-button" class="adventure-button" onclick="goToStage(1)">
                Comenzar la Aventura
            </button>
        </div>
    </div>

    <div id="stage-1" class="page-content">
        <div class="video-responsive rounded-xl overflow-hidden">
            <iframe id="youtube-player-1" width="100%" height="100%" src="https://www.youtube.com/embed/OXNgMQbK_R8?autoplay=1&mute=0&rel=0" title="Video de bienvenida con temática de aventura" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
        </div>
        <div class="content-wrapper">
            <h2 class="text-2xl md:text-4xl font-semibold mb-6">¡Feliz cumpleaños explorador Victor!</h2>
            <p class="text-base md:text-lg mb-4">
                Para avanzar tienes que pensar cuidadosamente y resolver este acertijo: <br>
                ¿dónde creas tus ideas? ¿dónde estudias, dibujas, diseñas? piensa en ese lugar y dirigete hacia alla!. Ese es tu primer reto.
            </p>
            <p class="text-sm text-gray-400 mt-8">
                </p>
        </div>
    </div>

    <div id="stage-2" class="page-content">
        <div class="content-wrapper">
            <h2 class="text-2xl md:text-4xl font-semibold mb-6">El Enigma del Guardián Rectangular</h2>
            <p class="text-base md:text-lg mb-4">
                "Soy rectangular, pero no soy pizza. Tengo teclas, pero no soy piano. ¿Quién soy?"
            </p>
            <input type="text" id="answer-input" class="w-full md:w-2/3 lg:w-1/2 p-3 rounded-lg bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4" placeholder="Escribe tu respuesta aquí...">
            <button id="answer-button" class="adventure-button bg-purple-600 hover:bg-purple-700">
                Desbloquear Pista
            </button>
            <div id="feedback" class="mt-4 text-red-400 font-semibold"></div>
        </div>
    </div>

    <div id="stage-3" class="page-content">
        <div class="content-wrapper">
            <h2 class="text-2xl md:text-4xl font-semibold mb-6">¡Acertaste!</h2>
            <p class="text-base md:text-lg mb-4">
                ¡Acertaste! Busca en el tercer cajón del closet que tienes al lado izquierdo tu recompensa.
            </p>
            <p class="text-sm text-gray-400 mt-8">
                </p>
        </div>
    </div>

    <div id="stage-4" class="page-content">
            <div class="content-wrapper">
                <h2 class="text-2xl md:text-4xl font-semibold
